--
-- Lets a turtle dig a room with the given dimensions.
-- The room starts in the turtle's position and extends 
-- forward, to the right and up
--
-- TODO: Go back to original position once done
-- TODO: empty the inventory if full
--

local tArgs = { ... }
-- check number of arguments
if #tArgs < 3 then
    error("Usage: room <depth> <height> <width>")
end

depth = tonumber(tArgs[1])
height = tonumber(tArgs[2])
width = tonumber(tArgs[3])


os.loadAPI("apis/move")
move.enableDigging()
move.setDebugging(true)


-- create room
for widthTemp = 1, width do
   for heightTemp = 1, height do
   		move.forward(depth - 1)

        -- line complete, move to next line
        if heightTemp<height then
          	move.up(1)
            move.turnAround()
        end
   end
   
   -- slice complete, return to start
   -- move back on odd heights, otherwise we are already back
   if height % 2 == 1 then
          move.turnAround()
          move.forward(depth - 1)
   end

   -- move down
   move.down(height - 1)

   -- next slice
   if widthTemp < width then
          move.turnLeft()
          move.forward(1)
          move.turnLeft()
   end
end

move.returnHome()